<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coaching Lab v4 - With AI Reasoning</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f3f4f6;
      min-height: 100vh;
    }

    .mockup-banner {
      background: #7c3aed;
      color: white;
      padding: 12px 24px;
      text-align: center;
      font-size: 14px;
    }

    .mockup-banner strong {
      color: #fbbf24;
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 24px;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 22px;
      color: #1f2937;
    }

    .header-controls {
      display: flex;
      gap: 12px;
    }

    .btn {
      padding: 10px 20px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      background: white;
      font-weight: 500;
    }

    .btn-primary { background: #3b82f6; color: white; border-color: #3b82f6; }
    .btn-success { background: #22c55e; color: white; border-color: #22c55e; }

    select {
      padding: 10px 16px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 14px;
    }

    /* Call Selector */
    .call-selector {
      background: white;
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      display: flex;
      gap: 16px;
      align-items: center;
    }

    /* Main 3-Column Layout */
    .main-layout {
      display: grid;
      grid-template-columns: 1fr 420px 380px;
      gap: 20px;
    }

    /* Panel Styles */
    .panel {
      background: white;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      max-height: calc(100vh - 220px);
    }

    .panel-header {
      padding: 14px 18px;
      border-bottom: 1px solid #e5e7eb;
    }

    .panel-header h2 {
      font-size: 14px;
      color: #1f2937;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-header.blue {
      background: linear-gradient(135deg, #1e40af, #3b82f6);
      color: white;
      border-radius: 12px 12px 0 0;
    }

    .panel-header.blue h2 { color: white; }

    .panel-header.purple {
      background: linear-gradient(135deg, #5b21b6, #8b5cf6);
      color: white;
      border-radius: 12px 12px 0 0;
    }

    .panel-header.purple h2 { color: white; }

    .panel-content {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
    }

    /* ========== TIMELINE (LEFT) ========== */
    .timeline-item {
      padding: 14px 16px;
      border-bottom: 1px solid #f3f4f6;
      cursor: pointer;
      border-radius: 8px;
      margin-bottom: 4px;
    }

    .timeline-item:hover {
      background: #f9fafb;
    }

    .timeline-item.selected {
      background: #fef3c7;
      border: 2px solid #f59e0b;
    }

    .timestamp {
      font-size: 10px;
      font-weight: 600;
      color: #9ca3af;
      font-family: 'Monaco', monospace;
      margin-bottom: 4px;
    }

    .message-speaker {
      font-size: 11px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .message-speaker.customer { color: #b45309; }
    .message-speaker.rep { color: #1d4ed8; }

    .message-text {
      font-size: 13px;
      line-height: 1.5;
      color: #374151;
    }

    .objection-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 9px;
      font-weight: 600;
      margin-left: 6px;
    }

    .objection-badge.price { background: #fef3c7; color: #b45309; }
    .objection-badge.authority { background: #f3e8ff; color: #7c3aed; }

    .has-coaching-indicator {
      display: inline-block;
      margin-top: 8px;
      padding: 4px 10px;
      background: #dcfce7;
      border-radius: 12px;
      font-size: 10px;
      color: #166534;
      font-weight: 600;
    }

    /* ========== AI COACHING (MIDDLE) ========== */
    .coaching-card {
      border: 2px solid #3b82f6;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 16px;
    }

    .coaching-card-header {
      background: linear-gradient(135deg, #1e40af, #3b82f6);
      color: white;
      padding: 10px 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    }

    .coaching-card-body {
      padding: 14px;
    }

    .coaching-script {
      font-size: 14px;
      line-height: 1.6;
      color: #1f2937;
      padding: 12px;
      background: #f0f9ff;
      border-radius: 8px;
      border-left: 3px solid #3b82f6;
      margin-bottom: 12px;
    }

    .coaching-tip {
      background: #fefce8;
      border-left: 3px solid #eab308;
      padding: 10px 12px;
      font-size: 12px;
      color: #713f12;
      margin-bottom: 12px;
    }

    .listen-for {
      padding-top: 12px;
      border-top: 1px solid #e5e7eb;
    }

    .listen-for-label {
      font-size: 10px;
      font-weight: 600;
      color: #64748b;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .response-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .response-chip {
      padding: 5px 10px;
      background: #f1f5f9;
      border: 1px solid #cbd5e1;
      border-radius: 14px;
      font-size: 11px;
      color: #475569;
    }

    /* Edit Section */
    .edit-section {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid #e5e7eb;
    }

    .edit-section textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 13px;
      min-height: 80px;
      margin-bottom: 10px;
    }

    .edit-buttons {
      display: flex;
      gap: 8px;
    }

    .edit-buttons .btn {
      flex: 1;
      padding: 8px;
      font-size: 12px;
    }

    /* ========== REASONING PANEL (RIGHT) ========== */
    .reasoning-section {
      margin-bottom: 20px;
    }

    .reasoning-title {
      font-size: 11px;
      font-weight: 700;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Detection Flow */
    .detection-flow {
      background: #f9fafb;
      border-radius: 8px;
      padding: 14px;
      margin-bottom: 16px;
    }

    .flow-step {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px dashed #e5e7eb;
    }

    .flow-step:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }

    .flow-step-number {
      width: 24px;
      height: 24px;
      background: #3b82f6;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .flow-step-content {
      flex: 1;
    }

    .flow-step-title {
      font-size: 12px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 4px;
    }

    .flow-step-detail {
      font-size: 11px;
      color: #6b7280;
      line-height: 1.5;
    }

    .flow-step-result {
      display: inline-block;
      margin-top: 6px;
      padding: 3px 8px;
      background: #dcfce7;
      border-radius: 6px;
      font-size: 10px;
      color: #166534;
      font-weight: 600;
    }

    /* Keywords Found */
    .keywords-found {
      background: #1f2937;
      border-radius: 8px;
      padding: 14px;
      margin-bottom: 16px;
    }

    .keywords-found h4 {
      font-size: 11px;
      color: #9ca3af;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .keyword-matches {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .keyword-match {
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 11px;
    }

    .keyword-match.found {
      background: #166534;
      color: #dcfce7;
    }

    .keyword-match.not-found {
      background: #374151;
      color: #9ca3af;
    }

    .keyword-score {
      font-size: 10px;
      color: #6b7280;
      margin-top: 10px;
    }

    /* Confidence Breakdown */
    .confidence-breakdown {
      background: #f9fafb;
      border-radius: 8px;
      padding: 14px;
      margin-bottom: 16px;
    }

    .confidence-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .confidence-score {
      font-size: 28px;
      font-weight: 700;
      color: #22c55e;
    }

    .confidence-label {
      font-size: 12px;
      color: #6b7280;
    }

    .confidence-bar {
      height: 8px;
      background: #e5e7eb;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 12px;
    }

    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      border-radius: 4px;
    }

    .confidence-factors {
      font-size: 11px;
      color: #6b7280;
    }

    .confidence-factor {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .confidence-factor-value {
      color: #22c55e;
      font-weight: 600;
    }

    /* Source Info */
    .source-info {
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 8px;
      padding: 14px;
      margin-bottom: 16px;
    }

    .source-info h4 {
      font-size: 11px;
      color: #1d4ed8;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .source-item {
      font-size: 12px;
      color: #374151;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .source-item-label {
      color: #6b7280;
    }

    .source-item-value {
      font-weight: 600;
    }

    .source-link {
      color: #3b82f6;
      text-decoration: underline;
      cursor: pointer;
    }

    /* Alternative Matches */
    .alternatives {
      background: #fef3c7;
      border: 1px solid #fcd34d;
      border-radius: 8px;
      padding: 14px;
    }

    .alternatives h4 {
      font-size: 11px;
      color: #b45309;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .alternative-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 10px;
      background: white;
      border-radius: 6px;
      margin-bottom: 6px;
      font-size: 12px;
    }

    .alternative-name {
      color: #374151;
    }

    .alternative-score {
      color: #6b7280;
      font-weight: 600;
    }

    .alternative-item:last-child {
      margin-bottom: 0;
    }

    /* Why Not Others */
    .why-not {
      margin-top: 10px;
      font-size: 11px;
      color: #92400e;
      font-style: italic;
    }

    /* ========== DESIGN NOTES ========== */
    .design-notes {
      margin-top: 32px;
      background: #fef3c7;
      border: 2px dashed #f59e0b;
      border-radius: 12px;
      padding: 24px;
    }

    .design-notes h3 {
      color: #b45309;
      margin-bottom: 16px;
    }

    .design-notes ul {
      margin-left: 20px;
      color: #92400e;
      font-size: 14px;
      line-height: 2;
    }
  </style>
</head>
<body>
  <div class="mockup-banner">
    <strong>DESIGN MOCKUP v4</strong> - With AI Reasoning: See exactly WHY the AI made each suggestion
  </div>

  <div class="container">

    <!-- Header -->
    <div class="header">
      <h1>üß™ Coaching Lab</h1>
      <div class="header-controls">
        <select>
          <option>KB: Solar Sales Playbook</option>
        </select>
        <button class="btn btn-success">üíæ Save Changes</button>
      </div>
    </div>

    <!-- Call Selector -->
    <div class="call-selector">
      <label style="font-weight: 500;">Call:</label>
      <select style="flex: 1; max-width: 400px;">
        <option>+1 (555) 123-4567 - Jan 28, 2026 2:34 PM</option>
      </select>
      <span style="font-size: 13px; color: #6b7280;">‚è± 4:32 ‚Ä¢ üí¨ 12 turns ‚Ä¢ ü§ñ 3 coaching moments</span>
    </div>

    <!-- 3-Column Layout -->
    <div class="main-layout">

      <!-- LEFT: Timeline -->
      <div class="panel">
        <div class="panel-header">
          <h2>üìû Timeline</h2>
        </div>
        <div class="panel-content">

          <div class="timeline-item">
            <div class="timestamp">0:00</div>
            <div class="message-speaker rep">üë§ Rep</div>
            <div class="message-text">Hi, this is Mike from Solar Solutions...</div>
          </div>

          <div class="timeline-item">
            <div class="timestamp">0:05</div>
            <div class="message-speaker customer">üè† Customer</div>
            <div class="message-text">Yeah, what is this about?</div>
          </div>

          <div class="timeline-item">
            <div class="timestamp">0:08</div>
            <div class="message-speaker rep">üë§ Rep</div>
            <div class="message-text">We're offering free solar assessments...</div>
          </div>

          <div class="timeline-item selected">
            <div class="timestamp">0:18</div>
            <div class="message-speaker customer">
              üè† Customer
              <span class="objection-badge price">üí∞ PRICE</span>
            </div>
            <div class="message-text">Look, I've already gotten quotes from two other companies and honestly your prices seem really high.</div>
            <div class="has-coaching-indicator">ü§ñ AI Coaching Triggered</div>
          </div>

          <div class="timeline-item">
            <div class="timestamp">0:28</div>
            <div class="message-speaker rep">üë§ Rep</div>
            <div class="message-text">I appreciate you being upfront about that...</div>
          </div>

          <div class="timeline-item">
            <div class="timestamp">0:58</div>
            <div class="message-speaker customer">
              üè† Customer
              <span class="objection-badge authority">üë• AUTH</span>
            </div>
            <div class="message-text">I need to talk to my wife about this.</div>
            <div class="has-coaching-indicator">ü§ñ AI Coaching Triggered</div>
          </div>

        </div>
      </div>

      <!-- MIDDLE: AI Coaching -->
      <div class="panel">
        <div class="panel-header blue">
          <h2>ü§ñ AI Coaching</h2>
        </div>
        <div class="panel-content">

          <div class="coaching-card">
            <div class="coaching-card-header">
              <span style="font-weight: 700;">SAY THIS NOW</span>
              <span>üí∞ Price Objection - Step 1</span>
            </div>
            <div class="coaching-card-body">
              <div class="coaching-script">
                "I appreciate you sharing that. Price is definitely important - let me ask you this: when you got those other quotes, did they include the 30-year warranty and the efficiency guarantee we offer?"
              </div>
              <div class="coaching-tip">
                üí° Reframe from price to value. Don't defend the price directly.
              </div>
              <div class="listen-for">
                <div class="listen-for-label">Listen for:</div>
                <div class="response-chips">
                  <span class="response-chip">"No they didn't"</span>
                  <span class="response-chip">"I'm not sure"</span>
                  <span class="response-chip">"Yes they did"</span>
                </div>
              </div>
            </div>
          </div>

          <!-- What rep said -->
          <div style="background: #eff6ff; border-radius: 8px; padding: 12px; margin-bottom: 16px;">
            <div style="font-size: 11px; font-weight: 600; color: #1d4ed8; margin-bottom: 6px;">üë§ Rep actually said:</div>
            <div style="font-size: 13px; color: #374151;">"I appreciate you being upfront about that. Can I ask what the other companies quoted you?"</div>
            <div style="margin-top: 8px; display: inline-block; padding: 4px 10px; background: #fef3c7; border-radius: 6px; font-size: 11px; color: #b45309; font-weight: 600;">
              68% match - Asked about price instead of reframing
            </div>
          </div>

          <!-- Edit Section -->
          <div class="edit-section">
            <div style="font-size: 12px; font-weight: 600; margin-bottom: 8px;">‚úèÔ∏è Edit this coaching:</div>
            <textarea>I appreciate you sharing that. Price is definitely important - let me ask you this: when you got those other quotes, did they include the 30-year warranty and the efficiency guarantee we offer?</textarea>
            <div class="edit-buttons">
              <button class="btn btn-primary">üíæ Save to KB</button>
              <button class="btn">üß™ Test</button>
            </div>
          </div>

        </div>
      </div>

      <!-- RIGHT: AI Reasoning -->
      <div class="panel">
        <div class="panel-header purple">
          <h2>üß† Why AI Said This</h2>
        </div>
        <div class="panel-content">

          <!-- Detection Flow -->
          <div class="reasoning-section">
            <div class="reasoning-title">üìä Detection Flow</div>
            <div class="detection-flow">
              <div class="flow-step">
                <div class="flow-step-number">1</div>
                <div class="flow-step-content">
                  <div class="flow-step-title">Checked Active Flow</div>
                  <div class="flow-step-detail">No active flow in progress for this call</div>
                  <div class="flow-step-result">‚Üí Move to Layer 2</div>
                </div>
              </div>
              <div class="flow-step">
                <div class="flow-step-number">2</div>
                <div class="flow-step-content">
                  <div class="flow-step-title">Category Detection</div>
                  <div class="flow-step-detail">Scanned for objection keywords in: "your prices seem really high"</div>
                  <div class="flow-step-result">‚úì Matched: PRICE (94%)</div>
                </div>
              </div>
              <div class="flow-step">
                <div class="flow-step-number">3</div>
                <div class="flow-step-content">
                  <div class="flow-step-title">Flow Lookup</div>
                  <div class="flow-step-detail">Found "Price Objection Flow" linked to price category</div>
                  <div class="flow-step-result">‚úì Started Flow - Step 1</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Keywords Found -->
          <div class="reasoning-section">
            <div class="reasoning-title">üîç Keywords Detected</div>
            <div class="keywords-found">
              <h4>In customer's statement:</h4>
              <div class="keyword-matches">
                <span class="keyword-match found">prices ‚úì</span>
                <span class="keyword-match found">high ‚úì</span>
                <span class="keyword-match not-found">expensive</span>
                <span class="keyword-match not-found">cost</span>
                <span class="keyword-match not-found">afford</span>
                <span class="keyword-match not-found">budget</span>
              </div>
              <div class="keyword-score">2 of 6 keywords matched = 33% keyword coverage</div>
            </div>
          </div>

          <!-- Confidence Breakdown -->
          <div class="reasoning-section">
            <div class="reasoning-title">üìà Confidence Score</div>
            <div class="confidence-breakdown">
              <div class="confidence-header">
                <div>
                  <div class="confidence-score">94%</div>
                  <div class="confidence-label">Price Objection</div>
                </div>
              </div>
              <div class="confidence-bar">
                <div class="confidence-fill" style="width: 94%;"></div>
              </div>
              <div class="confidence-factors">
                <div class="confidence-factor">
                  <span>Keyword match strength</span>
                  <span class="confidence-factor-value">+40%</span>
                </div>
                <div class="confidence-factor">
                  <span>"prices" = exact trigger word</span>
                  <span class="confidence-factor-value">+30%</span>
                </div>
                <div class="confidence-factor">
                  <span>"high" = modifier word</span>
                  <span class="confidence-factor-value">+15%</span>
                </div>
                <div class="confidence-factor">
                  <span>Context: comparing to competitors</span>
                  <span class="confidence-factor-value">+9%</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Source -->
          <div class="reasoning-section">
            <div class="reasoning-title">üìö Source</div>
            <div class="source-info">
              <h4>This response came from:</h4>
              <div class="source-item">
                <span class="source-item-label">Knowledge Base:</span>
                <span class="source-item-value">Solar Sales Playbook</span>
              </div>
              <div class="source-item">
                <span class="source-item-label">Flow:</span>
                <span class="source-item-value">Price Objection Flow</span>
              </div>
              <div class="source-item">
                <span class="source-item-label">Node:</span>
                <span class="source-item-value">Step 1 - Acknowledge & Reframe</span>
              </div>
              <div class="source-item">
                <span class="source-item-label">Script ID:</span>
                <span class="source-link">View in Settings ‚Üí</span>
              </div>
            </div>
          </div>

          <!-- Alternatives Considered -->
          <div class="reasoning-section">
            <div class="reasoning-title">ü§î Other Options Considered</div>
            <div class="alternatives">
              <h4>Runner-up matches:</h4>
              <div class="alternative-item">
                <span class="alternative-name">üíº Competitor Objection</span>
                <span class="alternative-score">45%</span>
              </div>
              <div class="alternative-item">
                <span class="alternative-name">ü§î Trust/Skepticism</span>
                <span class="alternative-score">28%</span>
              </div>
              <div class="alternative-item">
                <span class="alternative-name">‚è∞ Timing Objection</span>
                <span class="alternative-score">12%</span>
              </div>
              <div class="why-not">
                Price won because "prices" and "high" are direct price indicators. Competitor was runner-up because customer mentioned "other companies".
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>

    <!-- Design Notes -->
    <div class="design-notes">
      <h3>üé® What's in the Reasoning Panel:</h3>
      <ul>
        <li><strong>Detection Flow:</strong> Step-by-step showing which layer matched (Active Flow ‚Üí Category ‚Üí Keywords ‚Üí AI Fallback)</li>
        <li><strong>Keywords Detected:</strong> Which words in the customer's statement triggered the match (green = found, gray = not found)</li>
        <li><strong>Confidence Score:</strong> Breakdown of why it scored 94% - each factor explained</li>
        <li><strong>Source:</strong> Exactly which KB, Flow, and Node this response came from + link to edit in Settings</li>
        <li><strong>Other Options Considered:</strong> What else the AI thought it could be and why it chose Price over Competitor</li>
        <li><strong>Why Not Others:</strong> Plain English explanation of the decision</li>
      </ul>
    </div>

  </div>
</body>
</html>
